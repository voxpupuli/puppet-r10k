[Unit]
Description=R10K Webhook Service
After=syslog.target network.target

[Service]
Type=forking
EnvironmentFile=-/etc/sysconfig/webhook
RuntimeDirectory=webhook
User=<%= @user %>
PIDFile=/var/run/webhook/webhook.pid
TimeoutStartSec=90
TimeoutStopSec=30
RestartSec=10000

ExecStart=/usr/local/bin/webhook

ExecStartPre=/bin/mkdir -p /var/run/webhook
ExecStartPre=/bin/chown <%= @user %> /var/run/webhook
PermissionsStartOnly=true

KillMode=process

StandardOutput=syslog

[Install]
WantedBy=multi-user.target
